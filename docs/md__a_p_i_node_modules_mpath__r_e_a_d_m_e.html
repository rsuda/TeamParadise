<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Team Paradise: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Team Paradise
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#mpath</p>
<p>{G,S}et javascript object values using MongoDB-like path notation.</p>
<h3><a class="anchor" id="autotoc_md2545"></a>
Getting</h3>
<div class="fragment"><div class="line">var mpath = require(&#39;mpath&#39;);</div>
<div class="line"> </div>
<div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.get(&#39;comments.1.title&#39;, obj) // &#39;exciting!&#39;</div>
</div><!-- fragment --><p><code>mpath.get</code> supports array property notation as well.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.get(&#39;comments.title&#39;, obj) // [&#39;funny&#39;, &#39;exciting!&#39;]</div>
</div><!-- fragment --><p>Array property and indexing syntax, when used together, are very powerful.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">  array: [</div>
<div class="line">      { o: { array: [{x: {b: [4,6,8]}}, { y: 10} ] }}</div>
<div class="line">    , { o: { array: [{x: {b: [1,2,3]}}, { x: {z: 10 }}, { x: &#39;Turkey Day&#39; }] }}</div>
<div class="line">    , { o: { array: [{x: {b: null }}, { x: { b: [null, 1]}}] }}</div>
<div class="line">    , { o: { array: [{x: null }] }}</div>
<div class="line">    , { o: { array: [{y: 3 }] }}</div>
<div class="line">    , { o: { array: [3, 0, null] }}</div>
<div class="line">    , { o: { name: &#39;ha&#39; }}</div>
<div class="line">  ];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">var found = mpath.get(&#39;array.o.array.x.b.1&#39;, obj);</div>
<div class="line"> </div>
<div class="line">console.log(found); // prints..</div>
<div class="line"> </div>
<div class="line">    [ [6, undefined]</div>
<div class="line">    , [2, undefined, undefined]</div>
<div class="line">    , [null, 1]</div>
<div class="line">    , [null]</div>
<div class="line">    , [undefined]</div>
<div class="line">    , [undefined, undefined, undefined]</div>
<div class="line">    , undefined</div>
<div class="line">    ]</div>
</div><!-- fragment --><p><a class="anchor" id="autotoc_md2546"></a></p><h5>Field selection rules:</h5>
<p>The following rules are iteratively applied to each <code>segment</code> in the passed <code>path</code>. For example:</p>
<div class="fragment"><div class="line">var path = &#39;one.two.14&#39;; // path</div>
<div class="line">&#39;one&#39; // segment 0</div>
<div class="line">&#39;two&#39; // segment 1</div>
<div class="line">14    // segment 2</div>
</div><!-- fragment --><ul>
<li>1) when value of the segment parent is not an array, return the value of <code>parent.segment</code></li>
<li>2) when value of the segment parent is an array<ul>
<li>a) if the segment is an integer, replace the parent array with the value at <code>parent[segment]</code></li>
<li>b) if not an integer, keep the array but replace each array <code>item</code> with the value returned from calling <code>get(remainingSegments, item)</code> or undefined if falsey.</li>
</ul>
</li>
</ul>
<p><a class="anchor" id="autotoc_md2547"></a></p><h5>Maps</h5>
<p><code>mpath.get</code> also accepts an optional <code>map</code> argument which receives each individual found value. The value returned from the <code>map</code> function will be used in the original found values place.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.get(&#39;comments.title&#39;, obj, function (val) {</div>
<div class="line">  return &#39;funny&#39; == val</div>
<div class="line">    ? &#39;amusing&#39;</div>
<div class="line">    : val;</div>
<div class="line">});</div>
<div class="line">// [&#39;amusing&#39;, &#39;exciting!&#39;]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2548"></a>
Setting</h3>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;comments.1.title&#39;, &#39;hilarious&#39;, obj)</div>
<div class="line">console.log(obj.comments[1].title) // &#39;hilarious&#39;</div>
</div><!-- fragment --><p><code>mpath.set</code> supports the same array property notation as <code>mpath.get</code>.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;comments.title&#39;, [&#39;hilarious&#39;, &#39;fruity&#39;], obj);</div>
<div class="line"> </div>
<div class="line">console.log(obj); // prints..</div>
<div class="line"> </div>
<div class="line">  { comments: [</div>
<div class="line">      { title: &#39;hilarious&#39; },</div>
<div class="line">      { title: &#39;fruity&#39; }</div>
<div class="line">  ]}</div>
</div><!-- fragment --><p>Array property and indexing syntax can be used together also when setting.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">  array: [</div>
<div class="line">      { o: { array: [{x: {b: [4,6,8]}}, { y: 10} ] }}</div>
<div class="line">    , { o: { array: [{x: {b: [1,2,3]}}, { x: {z: 10 }}, { x: &#39;Turkey Day&#39; }] }}</div>
<div class="line">    , { o: { array: [{x: {b: null }}, { x: { b: [null, 1]}}] }}</div>
<div class="line">    , { o: { array: [{x: null }] }}</div>
<div class="line">    , { o: { array: [{y: 3 }] }}</div>
<div class="line">    , { o: { array: [3, 0, null] }}</div>
<div class="line">    , { o: { name: &#39;ha&#39; }}</div>
<div class="line">  ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;array.1.o&#39;, &#39;this was changed&#39;, obj);</div>
<div class="line"> </div>
<div class="line">console.log(require(&#39;util&#39;).inspect(obj, false, 1000)); // prints..</div>
<div class="line"> </div>
<div class="line">{</div>
<div class="line">  array: [</div>
<div class="line">      { o: { array: [{x: {b: [4,6,8]}}, { y: 10} ] }}</div>
<div class="line">    , { o: &#39;this was changed&#39; }</div>
<div class="line">    , { o: { array: [{x: {b: null }}, { x: { b: [null, 1]}}] }}</div>
<div class="line">    , { o: { array: [{x: null }] }}</div>
<div class="line">    , { o: { array: [{y: 3 }] }}</div>
<div class="line">    , { o: { array: [3, 0, null] }}</div>
<div class="line">    , { o: { name: &#39;ha&#39; }}</div>
<div class="line">  ];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;array.o.array.x&#39;, &#39;this was changed too&#39;, obj);</div>
<div class="line"> </div>
<div class="line">console.log(require(&#39;util&#39;).inspect(obj, false, 1000)); // prints..</div>
<div class="line"> </div>
<div class="line">{</div>
<div class="line">  array: [</div>
<div class="line">      { o: { array: [{x: &#39;this was changed too&#39;}, { y: 10, x: &#39;this was changed too&#39;} ] }}</div>
<div class="line">    , { o: &#39;this was changed&#39; }</div>
<div class="line">    , { o: { array: [{x: &#39;this was changed too&#39;}, { x: &#39;this was changed too&#39;}] }}</div>
<div class="line">    , { o: { array: [{x: &#39;this was changed too&#39;}] }}</div>
<div class="line">    , { o: { array: [{x: &#39;this was changed too&#39;, y: 3 }] }}</div>
<div class="line">    , { o: { array: [3, 0, null] }}</div>
<div class="line">    , { o: { name: &#39;ha&#39; }}</div>
<div class="line">  ];</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2549"></a>
Setting arrays</h4>
<p>By default, setting a property within an array to another array results in each element of the new array being set to the item in the destination array at the matching index. An example is helpful.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;comments.title&#39;, [&#39;hilarious&#39;, &#39;fruity&#39;], obj);</div>
<div class="line"> </div>
<div class="line">console.log(obj); // prints..</div>
<div class="line"> </div>
<div class="line">  { comments: [</div>
<div class="line">      { title: &#39;hilarious&#39; },</div>
<div class="line">      { title: &#39;fruity&#39; }</div>
<div class="line">  ]}</div>
</div><!-- fragment --><p>If we do not desire this destructuring-like assignment behavior we may instead specify the <code>$</code> operator in the path being set to force the array to be copied directly.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;comments.$.title&#39;, [&#39;hilarious&#39;, &#39;fruity&#39;], obj);</div>
<div class="line"> </div>
<div class="line">console.log(obj); // prints..</div>
<div class="line"> </div>
<div class="line">  { comments: [</div>
<div class="line">      { title: [&#39;hilarious&#39;, &#39;fruity&#39;] },</div>
<div class="line">      { title: [&#39;hilarious&#39;, &#39;fruity&#39;] }</div>
<div class="line">  ]}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2550"></a>
Field assignment rules</h4>
<p>The rules utilized mirror those used on <code>mpath.get</code>, meaning we can take values returned from <code>mpath.get</code>, update them, and reassign them using <code>mpath.set</code>. Note that setting nested arrays of arrays can get unweildy quickly. Check out the <a href="https://github.com/aheckmann/mpath/blob/master/test/index.js">tests</a> for more extreme examples.</p>
<p><a class="anchor" id="autotoc_md2551"></a></p><h5>Maps</h5>
<p><code>mpath.set</code> also accepts an optional <code>map</code> argument which receives each individual value being set. The value returned from the <code>map</code> function will be used in the original values place.</p>
<div class="fragment"><div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;funny&#39; },</div>
<div class="line">      { title: &#39;exciting!&#39; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.set(&#39;comments.title&#39;, [&#39;hilarious&#39;, &#39;fruity&#39;], obj, function (val) {</div>
<div class="line">  return val.length;</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">console.log(obj); // prints..</div>
<div class="line"> </div>
<div class="line">  { comments: [</div>
<div class="line">      { title: 9 },</div>
<div class="line">      { title: 6 }</div>
<div class="line">  ]}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2552"></a>
Custom object types</h3>
<p>Sometimes you may want to enact the same functionality on custom object types that store all their real data internally, say for an ODM type object. No fear, <code>mpath</code> has you covered. Simply pass the name of the property being used to store the internal data and it will be traversed instead:</p>
<div class="fragment"><div class="line">var mpath = require(&#39;mpath&#39;);</div>
<div class="line"> </div>
<div class="line">var obj = {</div>
<div class="line">    comments: [</div>
<div class="line">      { title: &#39;exciting!&#39;, _doc: { title: &#39;great!&#39; }}</div>
<div class="line">    ]</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">mpath.get(&#39;comments.0.title&#39;, obj, &#39;_doc&#39;)            // &#39;great!&#39;</div>
<div class="line">mpath.set(&#39;comments.0.title&#39;, &#39;nov 3rd&#39;, obj, &#39;_doc&#39;)</div>
<div class="line">mpath.get(&#39;comments.0.title&#39;, obj, &#39;_doc&#39;)            // &#39;nov 3rd&#39;</div>
<div class="line">mpath.get(&#39;comments.0.title&#39;, obj)                    // &#39;exciting&#39;</div>
</div><!-- fragment --><p>When used with a <code>map</code>, the <code>map</code> argument comes last.</p>
<div class="fragment"><div class="line">mpath.get(path, obj, &#39;_doc&#39;, map);</div>
<div class="line">mpath.set(path, val, obj, &#39;_doc&#39;, map);</div>
</div><!-- fragment --><p><a href="https://github.com/aheckmann/mpath/blob/master/LICENSE">LICENSE</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
